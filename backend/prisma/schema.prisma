generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  u_id         Int       @id @default(autoincrement())
  u_firstname  String
  u_lastname   String
  u_email      String     
  u_password   String
  u_status     Int        // 0 - hidden, 1 - active, 2 - deleted
  u_created_at DateTime   @default(now())
  u_updated_at DateTime   @updatedAt

  userApps     UserApp[]
}


model App {
  app_id          Int        @id @default(autoincrement())
  app_name        String     @unique
  app_created_at  DateTime   @default(now())
  app_updated_at  DateTime   @updatedAt
  app_status      Int        // 0 - hidden, 1 - active, 2 - deleted

  userApps        UserApp[]
  appStats        AppStats[]
}

model UserApp {
  ua_id           Int      @id @default(autoincrement())
  ua_u_id         Int
  ua_app_id       Int
  ua_created_at   DateTime @default(now())
  ua_updated_at   DateTime @updatedAt
  ua_status       Int      // 0 - hidden, 1 - active, 2 - deleted

  user            User     @relation(fields: [ua_u_id], references: [u_id])
  app             App      @relation(fields: [ua_app_id], references: [app_id])
}

model AppStats {
  as_id           Int      @id @default(autoincrement())
  as_date         DateTime
  as_ua_id        Int
  as_count        Int
  as_created_at   DateTime @default(now())
  as_updated_at   DateTime @updatedAt
  as_status       Int      // 0 - hidden, 1 - active, 2 - deleted

  app             App      @relation(fields: [as_ua_id], references: [ua_id])
}


